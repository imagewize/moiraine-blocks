import{getContext as e,getElement as n,store as c}from"@wordpress/interactivity";const{state:u,actions:s}=c("moiraine/mega-menu",{state:{get isMenuOpen(){return Object.values(u.menuOpenedBy).filter(Boolean).length>0},get menuOpenedBy(){return e().menuOpenedBy||{}}},actions:{toggleMenuOnClick(){const c=e(),{ref:u}=n();c.menuOpenedBy.click||c.menuOpenedBy.focus?s.closeMenuOnClick():(c.previousFocus=u,s.openMenu("click"))},closeMenuOnClick(){s.closeMenu("click"),s.closeMenu("focus")},handleMenuKeydown(n){e().menuOpenedBy.click&&"Escape"===n?.key&&s.closeMenuOnClick()},handleOutsideClick(n){const c=e(),u=c?.megaMenu;u&&!u.contains(n.target)&&s.closeMenuOnClick()},openMenu(n="click"){e().menuOpenedBy[n]=!0},closeMenu(n="click"){const c=e();c.menuOpenedBy[n]=!1,u.isMenuOpen||(c.megaMenu?.contains(window.document.activeElement)&&c.previousFocus?.focus(),c.previousFocus=null,c.megaMenu=null)}},callbacks:{initMenu(){const c=e(),{ref:s}=n();u.isMenuOpen&&(c.megaMenu=s)}}});